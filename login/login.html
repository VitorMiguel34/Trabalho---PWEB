<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sigaa plus | Login</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body class="bg-light">

    <main class="d-flex justify-content-center align-items-center" style="min-height: 100vh;">

        <div class="bg-white shadow-lg p-5 rounded-4 position-relative login-card">
            
            <div id="tela-escolha" class="fade-in">
                <h2 class="text-center fw-bold mb-2">Bem-vindo</h2>
                <p class="text-center text-muted mb-4">Como deseja acessar?</p>

                <div class="d-grid gap-3">
                    <button type="button" class="btn btn-outline-primary py-3 fw-semibold d-flex align-items-center justify-content-center gap-2"
                            onclick="avancarParaLogin('aluno')">
                        <i class="bi bi-backpack2 fs-5"></i> Sou Aluno
                    </button>
                    
                    <button type="button" class="btn btn-outline-dark py-3 fw-semibold d-flex align-items-center justify-content-center gap-2"
                            onclick="avancarParaLogin('professor')">
                        <i class="bi bi-person-workspace fs-5"></i> Sou Professor
                    </button>
                </div>
            </div>

            <div id="tela-formulario" class="d-none">
                
                <button type="button" class="btn btn-sm btn-link text-decoration-none text-muted p-0 mb-3"
                        onclick="voltarParaEscolha()">
                    <i class="bi bi-arrow-left"></i> Voltar
                </button>

                <h2 id="titulo-dinamico" class="text-center fw-bold mb-4">Login</h2>

                <form>
                    <div class="mb-3">
                        <label id="label-identificacao" class="form-label fw-semibold">Matrícula</label>
                        <input id='identificador' type="text" class="form-control" placeholder="Digite sua matrícula" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-semibold">Senha</label>
                        <input id='senha' type="password" class="form-control" placeholder="Digite sua senha" required>
                    </div>

                    <button id='botaoLogin' type="submit" class="btn btn-primary w-100 fw-semibold py-2">
                        Entrar
                    </button>
                </form>
            </div>

        </div>

    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Referências aos elementos
        const telaEscolha = document.getElementById('tela-escolha');
        const telaFormulario = document.getElementById('tela-formulario');
        
        const inputIdentificador = document.getElementById('identificador');
        const labelIdentificacao = document.getElementById('label-identificacao');
        const titulo = document.getElementById('titulo-dinamico');

        function avancarParaLogin(tipo) {
            // 1. Esconde a tela de escolha
            telaEscolha.classList.add('d-none');

            localStorage.setItem('escolhaDeLogin', tipo)
            
            // 2. Mostra o formulário e reinicia a animação
            telaFormulario.classList.remove('d-none');
            telaFormulario.classList.add('fade-in');

            // 3. Ajusta os textos conforme o tipo
            if (tipo === 'aluno') {
                titulo.innerText = "Login Aluno";
                labelIdentificacao.innerText = "Matrícula";
                inputIdentificador.placeholder = "Digite sua matrícula";
                inputIdentificador.setAttribute('maxlength', '10');
            } else {
                titulo.innerText = "Login Professor";
                labelIdentificacao.innerText = "Usuário";
                inputIdentificador.placeholder = "Digite seu usuário";
                inputIdentificador.removeAttribute('maxlength');
            }
        }

        function voltarParaEscolha() {
            // Esconde o formulário e volta para a escolha
            telaFormulario.classList.add('d-none');
            telaEscolha.classList.remove('d-none');
            telaEscolha.classList.add('fade-in'); // Animação opcional na volta
            
            // Limpa os campos para não ficar lixo
            inputIdentificador.value = '';
            document.getElementById('senha').value = '';
        }
    </script>

    <script src="login.js" type="module"></script>
</body>
</html>